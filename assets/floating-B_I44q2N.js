import{r as o,a as me}from"./index-BCtMShv3.js";import{n as N,a as ce,p as pe}from"./use-sync-refs-CZ2KMCOF.js";import{o as he,s as ve,f as Re,a as xe,c as ye,i as j,e as we,d as q,m as L,r as Ce,b as be,g as Ee}from"./floating-ui.dom-CmL5ukrp.js";import{r as W}from"./index-BqCLlfdy.js";function Me(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function et(e,t=!1){let[n,r]=o.useReducer(()=>({}),{}),l=o.useMemo(()=>Me(e),[e,n]);return N(()=>{if(!e)return;let i=new ResizeObserver(r);return i.observe(e),()=>{i.disconnect()}},[e]),t?{width:`${l.width}px`,height:`${l.height}px`}:l}function Se(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}var V=typeof document<"u"?o.useLayoutEffect:o.useEffect;function Y(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,l;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Y(e[r],t[r]))return!1;return!0}if(l=Object.keys(e),n=l.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,l[r]))return!1;for(r=n;r--!==0;){const i=l[r];if(!(i==="_owner"&&e.$$typeof)&&!Y(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function ue(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ee(e,t){const n=ue(e);return Math.round(t*n)/n}function z(e){const t=o.useRef(e);return V(()=>{t.current=e}),t}function Fe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:l,elements:{reference:i,floating:f}={},transform:u=!0,whileElementsMounted:p,open:a}=e,[g,R]=o.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[v,c]=o.useState(r);Y(v,r)||c(r);const[s,d]=o.useState(null),[h,w]=o.useState(null),C=o.useCallback(y=>{y!==E.current&&(E.current=y,d(y))},[]),m=o.useCallback(y=>{y!==P.current&&(P.current=y,w(y))},[]),x=i||s,b=f||h,E=o.useRef(null),P=o.useRef(null),O=o.useRef(g),_=p!=null,$=z(p),M=z(l),A=z(a),H=o.useCallback(()=>{if(!E.current||!P.current)return;const y={placement:t,strategy:n,middleware:v};M.current&&(y.platform=M.current),ye(E.current,P.current,y).then(F=>{const S={...F,isPositioned:A.current!==!1};I.current&&!Y(O.current,S)&&(O.current=S,W.flushSync(()=>{R(S)}))})},[v,t,n,M,A]);V(()=>{a===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,R(y=>({...y,isPositioned:!1})))},[a]);const I=o.useRef(!1);V(()=>(I.current=!0,()=>{I.current=!1}),[]),V(()=>{if(x&&(E.current=x),b&&(P.current=b),x&&b){if($.current)return $.current(x,b,H);H()}},[x,b,H,$,_]);const B=o.useMemo(()=>({reference:E,floating:P,setReference:C,setFloating:m}),[C,m]),T=o.useMemo(()=>({reference:x,floating:b}),[x,b]),k=o.useMemo(()=>{const y={position:n,left:0,top:0};if(!T.floating)return y;const F=ee(T.floating,g.x),S=ee(T.floating,g.y);return u?{...y,transform:"translate("+F+"px, "+S+"px)",...ue(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:S}},[n,u,T.floating,g.x,g.y]);return o.useMemo(()=>({...g,update:H,refs:B,elements:T,floatingStyles:k}),[g,H,B,T,k])}const fe=(e,t)=>({...he(e),options:[e,t]}),Pe=(e,t)=>({...ve(e),options:[e,t]}),Te=(e,t)=>({...Re(e),options:[e,t]}),He=(e,t)=>({...xe(e),options:[e,t]}),ae={...me},Ie=ae.useInsertionEffect,Oe=Ie||(e=>e());function ge(e){const t=o.useRef(()=>{});return Oe(()=>{t.current=e}),o.useCallback(function(){for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t.current==null?void 0:t.current(...r)},[])}var J=typeof document<"u"?o.useLayoutEffect:o.useEffect;let te=!1,$e=0;const ne=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+$e++;function Ae(){const[e,t]=o.useState(()=>te?ne():void 0);return J(()=>{e==null&&t(ne())},[]),o.useEffect(()=>{te=!0},[]),e}const De=ae.useId,Be=De||Ae;function ke(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(l=>l(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(l=>l!==n))||[])}}}const Ne=o.createContext(null),_e=o.createContext(null),je=()=>{var e;return((e=o.useContext(Ne))==null?void 0:e.id)||null},Ve=()=>o.useContext(_e),We="data-floating-ui-focusable";function Ye(e){const{open:t=!1,onOpenChange:n,elements:r}=e,l=Be(),i=o.useRef({}),[f]=o.useState(()=>ke()),u=je()!=null,[p,a]=o.useState(r.reference),g=ge((c,s,d)=>{i.current.openEvent=c?s:void 0,f.emit("openchange",{open:c,event:s,reason:d,nested:u}),n==null||n(c,s,d)}),R=o.useMemo(()=>({setPositionReference:a}),[]),v=o.useMemo(()=>({reference:p||r.reference||null,floating:r.floating||null,domReference:r.reference}),[p,r.reference,r.floating]);return o.useMemo(()=>({dataRef:i,open:t,onOpenChange:g,elements:v,events:f,floatingId:l,refs:R}),[t,g,v,f,l,R])}function Ue(e){e===void 0&&(e={});const{nodeId:t}=e,n=Ye({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,l=r.elements,[i,f]=o.useState(null),[u,p]=o.useState(null),g=(l==null?void 0:l.domReference)||i,R=o.useRef(null),v=Ve();J(()=>{g&&(R.current=g)},[g]);const c=Fe({...e,elements:{...l,...u&&{reference:u}}}),s=o.useCallback(m=>{const x=j(m)?{getBoundingClientRect:()=>m.getBoundingClientRect(),contextElement:m}:m;p(x),c.refs.setReference(x)},[c.refs]),d=o.useCallback(m=>{(j(m)||m===null)&&(R.current=m,f(m)),(j(c.refs.reference.current)||c.refs.reference.current===null||m!==null&&!j(m))&&c.refs.setReference(m)},[c.refs]),h=o.useMemo(()=>({...c.refs,setReference:d,setPositionReference:s,domReference:R}),[c.refs,d,s]),w=o.useMemo(()=>({...c.elements,domReference:g}),[c.elements,g]),C=o.useMemo(()=>({...c,...r,refs:h,elements:w,nodeId:t}),[c,h,w,t,r]);return J(()=>{r.dataRef.current.floatingContext=C;const m=v==null?void 0:v.nodesRef.current.find(x=>x.id===t);m&&(m.context=C)}),o.useMemo(()=>({...c,context:C,refs:h,elements:w}),[c,h,w,C])}const re="active",oe="selected";function K(e,t,n){const r=new Map,l=n==="item";let i=e;if(l&&e){const{[re]:f,[oe]:u,...p}=e;i=p}return{...n==="floating"&&{tabIndex:-1,[We]:""},...i,...t.map(f=>{const u=f?f[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((f,u)=>(u&&Object.entries(u).forEach(p=>{let[a,g]=p;if(!(l&&[re,oe].includes(a)))if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof g=="function"){var R;(R=r.get(a))==null||R.push(g),f[a]=function(){for(var v,c=arguments.length,s=new Array(c),d=0;d<c;d++)s[d]=arguments[d];return(v=r.get(a))==null?void 0:v.map(h=>h(...s)).find(h=>h!==void 0)}}}else f[a]=g}),f),{})}}function qe(e){e===void 0&&(e=[]);const t=e.map(u=>u==null?void 0:u.reference),n=e.map(u=>u==null?void 0:u.floating),r=e.map(u=>u==null?void 0:u.item),l=o.useCallback(u=>K(u,e,"reference"),t),i=o.useCallback(u=>K(u,e,"floating"),n),f=o.useCallback(u=>K(u,e,"item"),r);return o.useMemo(()=>({getReferenceProps:l,getFloatingProps:i,getItemProps:f}),[l,i,f])}function le(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const Le=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:l,offset:i=0,index:f=0,minItemsVisible:u=4,referenceOverflowThreshold:p=0,scrollRef:a,...g}=we(e,t),{rects:R,elements:{floating:v}}=t,c=n.current[f],s=(a==null?void 0:a.current)||v,d=v.clientTop||s.clientTop,h=v.clientTop!==0,w=s.clientTop!==0,C=v===s;if(!c)return{};const m={...t,...await fe(-c.offsetTop-v.clientTop-R.reference.height/2-c.offsetHeight/2-i).fn(t)},x=await q(le(m,s.scrollHeight+d+v.clientTop),g),b=await q(m,{...g,elementContext:"reference"}),E=L(0,x.top),P=m.y+E,$=(s.scrollHeight>s.clientHeight?M=>M:Ce)(L(0,s.scrollHeight+(h&&C||w?d*2:0)-E-L(0,x.bottom)));if(s.style.maxHeight=$+"px",s.scrollTop=E,l){const M=s.offsetHeight<c.offsetHeight*be(u,n.current.length)-1||b.top>=-p||b.bottom>=-p;W.flushSync(()=>l(M))}return r&&(r.current=await q(le({...m,y:P},s.offsetHeight+d+v.clientTop),g)),{y:P}}});function ze(e,t){const{open:n,elements:r}=e,{enabled:l=!0,overflowRef:i,scrollRef:f,onChange:u}=t,p=ge(u),a=o.useRef(!1),g=o.useRef(null),R=o.useRef(null);o.useEffect(()=>{if(!l)return;function c(d){if(d.ctrlKey||!s||i.current==null)return;const h=d.deltaY,w=i.current.top>=-.5,C=i.current.bottom>=-.5,m=s.scrollHeight-s.clientHeight,x=h<0?-1:1,b=h<0?"max":"min";s.scrollHeight<=s.clientHeight||(!w&&h>0||!C&&h<0?(d.preventDefault(),W.flushSync(()=>{p(E=>E+Math[b](h,m*x))})):/firefox/i.test(Se())&&(s.scrollTop+=h))}const s=(f==null?void 0:f.current)||r.floating;if(n&&s)return s.addEventListener("wheel",c),requestAnimationFrame(()=>{g.current=s.scrollTop,i.current!=null&&(R.current={...i.current})}),()=>{g.current=null,R.current=null,s.removeEventListener("wheel",c)}},[l,n,r.floating,i,f,p]);const v=o.useMemo(()=>({onKeyDown(){a.current=!0},onWheel(){a.current=!1},onPointerMove(){a.current=!1},onScroll(){const c=(f==null?void 0:f.current)||r.floating;if(!(!i.current||!c||!a.current)){if(g.current!==null){const s=c.scrollTop-g.current;(i.current.bottom<-.5&&s<-1||i.current.top<-.5&&s>1)&&W.flushSync(()=>p(d=>d+s))}requestAnimationFrame(()=>{g.current=c.scrollTop})}}}),[r.floating,p,i,f]);return o.useMemo(()=>l?{floating:v}:{},[l,v])}let D=o.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});D.displayName="FloatingContext";let Q=o.createContext(null);Q.displayName="PlacementContext";function tt(e){return o.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function nt(){return o.useContext(D).setReference}function rt(){return o.useContext(D).getReferenceProps}function ot(){let{getFloatingProps:e,slot:t}=o.useContext(D);return o.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}function lt(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=o.useContext(Q),n=o.useMemo(()=>e,[JSON.stringify(e,(l,i)=>{var f;return(f=i==null?void 0:i.outerHTML)!=null?f:i})]);N(()=>{t==null||t(n??null)},[t,n]);let r=o.useContext(D);return o.useMemo(()=>[r.setFloating,e?r.styles:{}],[r.setFloating,e,r.styles])}let se=4;function st({children:e,enabled:t=!0}){let[n,r]=o.useState(null),[l,i]=o.useState(0),f=o.useRef(null),[u,p]=o.useState(null);Ke(u);let a=t&&n!==null&&u!==null,{to:g="bottom",gap:R=0,offset:v=0,padding:c=0,inner:s}=Ge(n,u),[d,h="center"]=g.split(" ");N(()=>{a&&i(0)},[a]);let{refs:w,floatingStyles:C,context:m}=Ue({open:a,placement:d==="selection"?h==="center"?"bottom":`bottom-${h}`:h==="center"?`${d}`:`${d}-${h}`,strategy:"absolute",transform:!1,middleware:[fe({mainAxis:d==="selection"?0:R,crossAxis:v}),Pe({padding:c}),d!=="selection"&&Te({padding:c}),d==="selection"&&s?Le({...s,padding:c,overflowRef:f,offset:l,minItemsVisible:se,referenceOverflowThreshold:c,onFallbackChange(M){var A,H;if(!M)return;let I=m.elements.floating;if(!I)return;let B=parseFloat(getComputedStyle(I).scrollPaddingBottom)||0,T=Math.min(se,I.childElementCount),k=0,y=0;for(let F of(H=(A=m.elements.floating)==null?void 0:A.childNodes)!=null?H:[])if(F instanceof HTMLElement){let S=F.offsetTop,X=S+F.clientHeight+B,U=I.scrollTop,Z=U+I.clientHeight;if(S>=U&&X<=Z)T--;else{y=Math.max(0,Math.min(X,Z)-Math.max(S,U)),k=F.clientHeight;break}}T>=1&&i(F=>{let S=k*T-y+B;return F>=S?F:S})}}):null,He({padding:c,apply({availableWidth:M,availableHeight:A,elements:H}){Object.assign(H.floating.style,{overflow:"auto",maxWidth:`${M}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${A}px)`})}})].filter(Boolean),whileElementsMounted:Ee}),[x=d,b=h]=m.placement.split("-");d==="selection"&&(x="selection");let E=o.useMemo(()=>({anchor:[x,b].filter(Boolean).join(" ")}),[x,b]),P=ze(m,{overflowRef:f,onChange:i}),{getReferenceProps:O,getFloatingProps:_}=qe([P]),$=ce(M=>{p(M),w.setFloating(M)});return o.createElement(Q.Provider,{value:r},o.createElement(D.Provider,{value:{setFloating:$,setReference:w.setReference,styles:C,getReferenceProps:O,getFloatingProps:_,slot:E}},e))}function Ke(e){N(()=>{if(!e)return;let t=new MutationObserver(()=>{let n=window.getComputedStyle(e).maxHeight,r=parseFloat(n);if(isNaN(r))return;let l=parseInt(n);isNaN(l)||r!==l&&(e.style.maxHeight=`${Math.ceil(r)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function Ge(e,t){var n,r,l;let i=G((n=e==null?void 0:e.gap)!=null?n:"var(--anchor-gap, 0)",t),f=G((r=e==null?void 0:e.offset)!=null?r:"var(--anchor-offset, 0)",t),u=G((l=e==null?void 0:e.padding)!=null?l:"var(--anchor-padding, 0)",t);return{...e,gap:i,offset:f,padding:u}}function G(e,t,n=void 0){let r=pe(),l=ce((p,a)=>{if(p==null)return[n,null];if(typeof p=="number")return[p,null];if(typeof p=="string"){if(!a)return[n,null];let g=ie(p,a);return[g,R=>{let v=de(p);{let c=v.map(s=>window.getComputedStyle(a).getPropertyValue(s));r.requestAnimationFrame(function s(){r.nextFrame(s);let d=!1;for(let[w,C]of v.entries()){let m=window.getComputedStyle(a).getPropertyValue(C);if(c[w]!==m){c[w]=m,d=!0;break}}if(!d)return;let h=ie(p,a);g!==h&&(R(h),g=h)})}return r.dispose}]}return[n,null]}),i=o.useMemo(()=>l(e,t)[0],[e,t]),[f=i,u]=o.useState();return N(()=>{let[p,a]=l(e,t);if(u(p),!!a)return a(u)},[e,t]),f}function de(e){let t=/var\((.*)\)/.exec(e);if(t){let n=t[1].indexOf(",");if(n===-1)return[t[1]];let r=t[1].slice(0,n).trim(),l=t[1].slice(n+1).trim();return l?[r,...de(l)]:[r]}return[]}function ie(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}export{rt as F,st as M,lt as R,ot as b,et as d,tt as x,nt as y};
