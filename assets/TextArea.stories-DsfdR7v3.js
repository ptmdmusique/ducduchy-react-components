import{j as o}from"./jsx-runtime-D_zvdyIk.js";import{c as me,u as fe,F as he}from"./index.esm--LincS5R.js";import{S as ge}from"./StorybookCommonWithForm-AWrnt9pC.js";import{c as k,C as pe,s as M}from"./index-KpAVk5lk.js";import{n as ve}from"./index.browser-OxPLOBIU.js";import{R as _,r as l}from"./index-BCtMShv3.js";import{i as be,_ as ye,a as Se}from"./use-isomorphic-layout-effect.browser.esm-B3xUH1Pm.js";import{d as Re}from"./debounce-D2cU03he.js";import{F as Ce}from"./CustomTransition-CSHLgCWl.js";import{I as Te}from"./Icon-DLP5P1Ct.js";import{B as Fe}from"./Button-Dw10h_TB.js";import"./animation-CUZBsLrg.js";import"./use-sync-refs-CZ2KMCOF.js";import"./use-is-mounted-suvdIMg-.js";import"./use-server-handoff-complete-C8_JXbTh.js";import"./index-CvPWi8JN.js";var ze=function(e){var n=_.useRef(e);return be(function(){n.current=e}),n},q=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},We=function(e,n){var a=_.useRef();return _.useCallback(function(i){e.current=i,a.current&&q(a.current,null),a.current=n,n&&q(n,i)},[n])},O={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},Le=function(e){Object.keys(O).forEach(function(n){e.style.setProperty(n,O[n],"important")})},B=Le,d=null,U=function(e,n){var a=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?a+n.borderSize:a-n.paddingSize};function je(t,e,n,a){n===void 0&&(n=1),a===void 0&&(a=1/0),d||(d=document.createElement("textarea"),d.setAttribute("tabindex","-1"),d.setAttribute("aria-hidden","true"),B(d)),d.parentNode===null&&document.body.appendChild(d);var i=t.paddingSize,u=t.borderSize,s=t.sizingStyle,T=s.boxSizing;Object.keys(s).forEach(function(p){var v=p;d.style[v]=s[v]}),B(d),d.value=e;var m=U(d,t);d.value=e,m=U(d,t),d.value="x";var b=d.scrollHeight-i,f=b*n;T==="border-box"&&(f=f+i+u),m=Math.max(f,m);var r=b*a;return T==="border-box"&&(r=r+i+u),m=Math.min(r,m),[m,b]}var $=function(){},xe=function(e,n){return e.reduce(function(a,i){return a[i]=n[i],a},{})},Ee=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],Ve=!!document.documentElement.currentStyle,we=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var a=xe(Ee,n),i=a.boxSizing;if(i==="")return null;Ve&&i==="border-box"&&(a.width=parseFloat(a.width)+parseFloat(a.borderRightWidth)+parseFloat(a.borderLeftWidth)+parseFloat(a.paddingRight)+parseFloat(a.paddingLeft)+"px");var u=parseFloat(a.paddingBottom)+parseFloat(a.paddingTop),s=parseFloat(a.borderBottomWidth)+parseFloat(a.borderTopWidth);return{sizingStyle:a,paddingSize:u,borderSize:s}},Ne=we;function I(t,e,n){var a=ze(n);l.useLayoutEffect(function(){var i=function(s){return a.current(s)};if(t)return t.addEventListener(e,i),function(){return t.removeEventListener(e,i)}},[])}var He=function(e,n){I(document.body,"reset",function(a){e.current.form===a.target&&n(a)})},ke=function(e){I(window,"resize",e)},_e=function(e){I(document.fonts,"loadingdone",e)},Ie=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Me=function(e,n){var a=e.cacheMeasurements,i=e.maxRows,u=e.minRows,s=e.onChange,T=s===void 0?$:s,m=e.onHeightChange,b=m===void 0?$:m,f=ye(e,Ie),r=f.value!==void 0,p=l.useRef(null),v=We(p,n),y=l.useRef(0),F=l.useRef(),S=function(){var g=p.current,W=a&&F.current?F.current:Ne(g);if(W){F.current=W;var c=je(W,g.value||g.placeholder||"x",u,i),C=c[0],de=c[1];y.current!==C&&(y.current=C,g.style.setProperty("height",C+"px","important"),b(C,{rowHeight:de}))}},R=function(g){r||S(),T(g)};return l.useLayoutEffect(S),He(p,function(){if(!r){var h=p.current.value;requestAnimationFrame(function(){var g=p.current;g&&h!==g.value&&S()})}}),ke(S),_e(S),l.createElement("textarea",Se({},f,{onChange:R,ref:v}))},qe=l.forwardRef(Me);const Oe=({control:t,name:e,onChange:n})=>{const a=me({name:e,control:t});return l.useEffect(()=>{n(a)},[a,n]),null},N=({borderType:t="outline",caption:e,captionIcon:n,state:a,label:i,hasContent:u,debounceParam:s,className:T,formControl:m,resize:b="both",ref:f,...r})=>{const p=l.useRef((r==null?void 0:r.id)??`input---${ve()}`),v=a==="error",y=l.useRef(null);l.useEffect(()=>{f&&(typeof f=="function"?f(y.current):f.current=y.current)},[f]);const F=l.useRef(Re(c=>{var C;(C=r==null?void 0:r.onChange)==null||C.call(r,c)},(s==null?void 0:s.debounceTime)??0)),[S,R]=l.useState(u??!1),h=l.useCallback(()=>!!u||!!(r!=null&&r.value)||!!(r!=null&&r.defaultValue)||!!(r!=null&&r.placeholder),[r==null?void 0:r.value,r==null?void 0:r.placeholder,r==null?void 0:r.defaultValue,u]);l.useEffect(()=>{u!=null&&R(u)},[u]);const g=l.useCallback(c=>{R(!!c||h())},[h]),W=c=>{R(!!(r!=null&&r.placeholder)||h()||!!c.target.value),F.current(c)};return l.useEffect(()=>{R(h())},[h]),l.useLayoutEffect(()=>{setTimeout(()=>{var c;R(h()||!!((c=y.current)!=null&&c.value))},1)},[h]),l.useEffect(()=>{const c=F.current;return()=>{s&&(s.flushOnUnmount?c.flush():c.cancel())}},[s]),o.jsxs("div",{className:k(`${pe}-text-area`,T),children:[o.jsxs("div",{className:k("text-area-container",`text-area-container--${t}`,{"text-area-container--error":v},{"text-area-container--has-content":S},{"text-area-container--read-only":r==null?void 0:r.readOnly}),children:[o.jsx("label",{htmlFor:p.current,children:i}),o.jsx(qe,{...r,id:p.current,ref:y,onChange:W,style:{resize:b}}),m&&o.jsx(Oe,{control:m,name:r.name??"",onChange:g})]}),o.jsx(Ce,{show:!!e,children:o.jsxs("div",{className:k("caption-container",{"caption-container--error":v}),children:[(v||n)&&o.jsx(Te,{icon:n||["far","info-circle"],className:"fa-fw icon"}),e]})})]})};try{N.displayName="TextArea",N.__docgenInfo={description:"",displayName:"TextArea",props:{borderType:{defaultValue:{value:"outline"},description:"",name:"borderType",required:!1,type:{name:"enum",value:[{value:'"fill"'},{value:'"outline"'},{value:'"plain"'}]}},caption:{defaultValue:null,description:"",name:"caption",required:!1,type:{name:"ReactNode"}},captionIcon:{defaultValue:null,description:"",name:"captionIcon",required:!1,type:{name:"[IconPrefix, string]"}},state:{defaultValue:null,description:"",name:"state",required:!1,type:{name:"enum",value:[{value:'"normal"'},{value:'"error"'}]}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},hasContent:{defaultValue:null,description:"",name:"hasContent",required:!1,type:{name:"boolean"}},debounceParam:{defaultValue:null,description:"",name:"debounceParam",required:!1,type:{name:"{ debounceTime: number; flushOnUnmount?: boolean; }"}},formControl:{defaultValue:null,description:"",name:"formControl",required:!1,type:{name:"Control<any>"}},resize:{defaultValue:{value:"both"},description:"",name:"resize",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"inherit"'},{value:'"inline"'},{value:'"both"'},{value:'"horizontal"'},{value:'"vertical"'},{value:'"initial"'},{value:'"block"'},{value:'"-moz-initial"'},{value:'"revert"'},{value:'"revert-layer"'},{value:'"unset"'}]}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLTextAreaElement>"}}}}}catch{}const ar={title:"Components/Form/Text Area",component:N,argTypes:{label:{type:"string"},caption:{type:"string"},debounceParam:M,formControl:M},parameters:{controls:{expanded:!0}}},z=t=>o.jsx(N,{...t}),L=z.bind({}),j=z.bind({});j.args={label:"Hello Label!"};const x=z.bind({});x.args={placeholder:"John Doe"};const E=z.bind({});E.args={minRows:5};const V=z.bind({});V.args={label:"What a label",placeholder:"John Doe"};const w=z.bind({});w.args={label:"What a label",placeholder:"John Doe",caption:o.jsx("div",{className:"input-stories-caption",children:"Here is a caption"})};L.args={};const H=t=>{const e=fe(),{register:n,setValue:a,control:i}=e,u=()=>{a("formValue",Math.random().toString())};return o.jsx(he,{...e,children:o.jsxs(ge,{children:[o.jsxs("p",{className:"mb-4",children:[o.jsx("code",{children:"useForm's"})," ",o.jsx("code",{children:"setValue"})," demo"]}),o.jsx(N,{...t,...n("formValue"),label:"My Label",formControl:i}),o.jsx(Fe,{borderType:"outline",className:"mt-4",onClick:u,children:"Generate random value"}),o.jsxs("p",{className:"mt-8",children:["You ",o.jsx("strong",{children:"MUST"})," pass the ",o.jsx("code",{children:"control"})," value from",o.jsx("code",{children:"useForm"})," to make the label float correctly",o.jsx("br",{}),"---",o.jsx("br",{}),"OR you can pass the `hasContent` prop to control the label float yourself"]})]})})};var D,G,Y;L.parameters={...L.parameters,docs:{...(D=L.parameters)==null?void 0:D.docs,source:{originalSource:"args => <TextArea {...args} />",...(Y=(G=L.parameters)==null?void 0:G.docs)==null?void 0:Y.source}}};var J,X,Z;j.parameters={...j.parameters,docs:{...(J=j.parameters)==null?void 0:J.docs,source:{originalSource:"args => <TextArea {...args} />",...(Z=(X=j.parameters)==null?void 0:X.docs)==null?void 0:Z.source}}};var K,Q,A;x.parameters={...x.parameters,docs:{...(K=x.parameters)==null?void 0:K.docs,source:{originalSource:"args => <TextArea {...args} />",...(A=(Q=x.parameters)==null?void 0:Q.docs)==null?void 0:A.source}}};var P,ee,re;E.parameters={...E.parameters,docs:{...(P=E.parameters)==null?void 0:P.docs,source:{originalSource:"args => <TextArea {...args} />",...(re=(ee=E.parameters)==null?void 0:ee.docs)==null?void 0:re.source}}};var ne,ae,te;V.parameters={...V.parameters,docs:{...(ne=V.parameters)==null?void 0:ne.docs,source:{originalSource:"args => <TextArea {...args} />",...(te=(ae=V.parameters)==null?void 0:ae.docs)==null?void 0:te.source}}};var oe,ie,le;w.parameters={...w.parameters,docs:{...(oe=w.parameters)==null?void 0:oe.docs,source:{originalSource:"args => <TextArea {...args} />",...(le=(ie=w.parameters)==null?void 0:ie.docs)==null?void 0:le.source}}};var se,ue,ce;H.parameters={...H.parameters,docs:{...(se=H.parameters)==null?void 0:se.docs,source:{originalSource:`args => {
  const methods = useForm<{
    formValue: string;
  }>();
  const {
    register,
    setValue,
    control
  } = methods;
  const generateRandomValue = () => {
    setValue("formValue", Math.random().toString());
  };
  return <FormProvider {...methods}>\r
      <StorybookCommonWithForm>\r
        <p className="mb-4">\r
          <code>useForm's</code> <code>setValue</code> demo\r
        </p>\r
\r
        <TextArea {...args} {...register("formValue")} label="My Label" formControl={control} />\r
\r
        <Button borderType="outline" className="mt-4" onClick={generateRandomValue}>\r
          Generate random value\r
        </Button>\r
\r
        <p className="mt-8">\r
          You <strong>MUST</strong> pass the <code>control</code> value from\r
          <code>useForm</code> to make the label float correctly\r
          <br />\r
          ---\r
          <br />\r
          OR you can pass the \`hasContent\` prop to control the label float\r
          yourself\r
        </p>\r
      </StorybookCommonWithForm>\r
    </FormProvider>;
}`,...(ce=(ue=H.parameters)==null?void 0:ue.docs)==null?void 0:ce.source}}};const tr=["Default","WithLabel","WithPlaceholder","WithMinRows","WithLabelAndPlaceholder","WithCaption","WithUseFormSetValue"];export{L as Default,w as WithCaption,j as WithLabel,V as WithLabelAndPlaceholder,E as WithMinRows,x as WithPlaceholder,H as WithUseFormSetValue,tr as __namedExportsOrder,ar as default};
