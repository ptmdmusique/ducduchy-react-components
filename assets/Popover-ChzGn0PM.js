import{j as ee}from"./jsx-runtime-D_zvdyIk.js";import{c as ue,C as ne}from"./index-KpAVk5lk.js";import{$ as Fe,a as ke}from"./useFocusRing-D4bu8X2q.js";import{r,R as y}from"./index-BCtMShv3.js";import{w as we,e as Re}from"./use-resolve-button-type-DNd3Xgnw.js";import{y as Me,x as Oe,R as Ne,b as De,d as Ae,M as Le}from"./floating-B_I44q2N.js";import{K as X,y as Y,a as g,_ as se,L as te,n as je,T as Ke,s as ye,u as q,O as re}from"./use-sync-refs-CZ2KMCOF.js";import{u as Ee,O as $e,b as Ge,R as Ve,E as qe,C as He,a as A}from"./use-tab-direction-IrkWQ0ly.js";import{n as de,m as Ue,f as Je,r as Qe,t as We,R as Ye}from"./portal-BDPEH6C3.js";import{u as ge,x as he,i as Z,R as Ie,s as Ze,c as Xe}from"./use-server-handoff-complete-C8_JXbTh.js";import{f as ie,s as ce}from"./hidden-CkFg_2Sb.js";import{r as xe}from"./bugs-DpEN4NTH.js";import{P as V,F as L,b as fe,T as pe,A as ze,h as et}from"./focus-management-Bh_oGY5B.js";import{u as tt,o as G}from"./keyboard-tlvg-gRs.js";import{B as nt}from"./Button-Dw10h_TB.js";var rt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(rt||{}),ot=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(ot||{});let lt={0:e=>({...e,popoverState:q(e.popoverState,{0:1,1:0}),__demoMode:!1}),1(e){return e.popoverState===1?e:{...e,popoverState:1,__demoMode:!1}},2(e,o){return e.button===o.button?e:{...e,button:o.button}},3(e,o){return e.buttonId===o.buttonId?e:{...e,buttonId:o.buttonId}},4(e,o){return e.panel===o.panel?e:{...e,panel:o.panel}},5(e,o){return e.panelId===o.panelId?e:{...e,panelId:o.panelId}}},ve=r.createContext(null);ve.displayName="PopoverContext";function oe(e){let o=r.useContext(ve);if(o===null){let i=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,oe),i}return o}let le=r.createContext(null);le.displayName="PopoverAPIContext";function me(e){let o=r.useContext(le);if(o===null){let i=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,me),i}return o}let be=r.createContext(null);be.displayName="PopoverGroupContext";function Ce(){return r.useContext(be)}let ae=r.createContext(null);ae.displayName="PopoverPanelContext";function at(){return r.useContext(ae)}function ut(e,o){return q(o.type,lt,e,o)}let st="div";function it(e,o){var i;let{__demoMode:p=!1,...m}=e,b=r.useRef(null),P=Y(o,Ke(u=>{b.current=u})),l=r.useRef([]),f=r.useReducer(ut,{__demoMode:p,popoverState:p?0:1,buttons:l,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:r.createRef(),afterPanelSentinel:r.createRef(),afterButtonSentinel:r.createRef()}),[{popoverState:x,button:n,buttonId:S,panel:v,panelId:h,beforePanelSentinel:I,afterPanelSentinel:E,afterButtonSentinel:a},d]=f,$=de((i=b.current)!=null?i:n),k=r.useMemo(()=>{if(!n||!v)return!1;for(let C of document.querySelectorAll("body > *"))if(Number(C==null?void 0:C.contains(n))^Number(C==null?void 0:C.contains(v)))return!0;let u=fe(),t=u.indexOf(n),c=(t+u.length-1)%u.length,s=(t+1)%u.length,B=u[c],F=u[s];return!v.contains(B)&&!v.contains(F)},[n,v]),w=ye(S),R=ye(h),H=r.useMemo(()=>({buttonId:w,panelId:R,close:()=>d({type:1})}),[w,R,d]),M=Ce(),_=M==null?void 0:M.registerPopover,j=g(()=>{var u;return(u=M==null?void 0:M.isFocusWithinPopoverGroup())!=null?u:($==null?void 0:$.activeElement)&&((n==null?void 0:n.contains($.activeElement))||(v==null?void 0:v.contains($.activeElement)))});r.useEffect(()=>_==null?void 0:_(H),[_,H]);let[T,U]=We(),K=Ge(n),O=Ve({mainTreeNode:K,portals:T,defaultContainers:[n,v]});qe($==null?void 0:$.defaultView,"focus",u=>{var t,c,s,B,F,C;u.target!==window&&u.target instanceof HTMLElement&&x===0&&(j()||n&&v&&(O.contains(u.target)||(c=(t=I.current)==null?void 0:t.contains)!=null&&c.call(t,u.target)||(B=(s=E.current)==null?void 0:s.contains)!=null&&B.call(s,u.target)||(C=(F=a.current)==null?void 0:F.contains)!=null&&C.call(F,u.target)||d({type:1})))},!0),Ye(x===0,O.resolveContainers,(u,t)=>{d({type:1}),ze(t,et.Loose)||(u.preventDefault(),n==null||n.focus())});let N=g(u=>{d({type:1});let t=u?u instanceof HTMLElement?u:"current"in u&&u.current instanceof HTMLElement?u.current:n:n;t==null||t.focus()}),J=r.useMemo(()=>({close:N,isPortalled:k}),[N,k]),Q=r.useMemo(()=>({open:x===0,close:N}),[x,N]),W={ref:P},z=te();return y.createElement($e,{node:K},y.createElement(Le,null,y.createElement(ae.Provider,{value:null},y.createElement(ve.Provider,{value:f},y.createElement(le.Provider,{value:J},y.createElement(He,{value:N},y.createElement(Xe,{value:q(x,{0:Z.Open,1:Z.Closed})},y.createElement(U,null,z({ourProps:W,theirProps:m,slot:Q,defaultTag:st,name:"Popover"})))))))))}let ct="button";function pt(e,o){let i=r.useId(),{id:p=`headlessui-popover-button-${i}`,disabled:m=!1,autoFocus:b=!1,...P}=e,[l,f]=oe("Popover.Button"),{isPortalled:x}=me("Popover.Button"),n=r.useRef(null),S=`headlessui-focus-sentinel-${r.useId()}`,v=Ce(),h=v==null?void 0:v.closeOthers,I=at()!==null;r.useEffect(()=>{if(!I)return f({type:3,buttonId:p}),()=>{f({type:3,buttonId:null})}},[I,p,f]);let[E]=r.useState(()=>Symbol()),a=Y(n,o,Me(),g(t=>{if(!I){if(t)l.buttons.current.push(E);else{let c=l.buttons.current.indexOf(E);c!==-1&&l.buttons.current.splice(c,1)}l.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),t&&f({type:2,button:t})}})),d=Y(n,o),$=de(n),k=g(t=>{var c,s,B;if(I){if(l.popoverState===1)return;switch(t.key){case G.Space:case G.Enter:t.preventDefault(),(s=(c=t.target).click)==null||s.call(c),f({type:1}),(B=l.button)==null||B.focus();break}}else switch(t.key){case G.Space:case G.Enter:t.preventDefault(),t.stopPropagation(),l.popoverState===1&&(h==null||h(l.buttonId)),f({type:0});break;case G.Escape:if(l.popoverState!==0)return h==null?void 0:h(l.buttonId);if(!n.current||$!=null&&$.activeElement&&!n.current.contains($.activeElement))return;t.preventDefault(),t.stopPropagation(),f({type:1});break}}),w=g(t=>{I||t.key===G.Space&&t.preventDefault()}),R=g(t=>{var c,s;xe(t.currentTarget)||m||(I?(f({type:1}),(c=l.button)==null||c.focus()):(t.preventDefault(),t.stopPropagation(),l.popoverState===1&&(h==null||h(l.buttonId)),f({type:0}),(s=l.button)==null||s.focus()))}),H=g(t=>{t.preventDefault(),t.stopPropagation()}),{isFocusVisible:M,focusProps:_}=Fe({autoFocus:b}),{isHovered:j,hoverProps:T}=ke({isDisabled:m}),{pressed:U,pressProps:K}=we({disabled:m}),O=l.popoverState===0,N=r.useMemo(()=>({open:O,active:U||O,disabled:m,hover:j,focus:M,autofocus:b}),[O,j,M,U,m,b]),J=Re(e,l.button),Q=I?se({ref:d,type:J,onKeyDown:k,onClick:R,disabled:m||void 0,autoFocus:b},_,T,K):se({ref:a,id:l.buttonId,type:J,"aria-expanded":l.popoverState===0,"aria-controls":l.panel?l.panelId:void 0,disabled:m||void 0,autoFocus:b,onKeyDown:k,onKeyUp:w,onClick:R,onMouseDown:H},_,T,K),W=Ee(),z=g(()=>{let t=l.panel;if(!t)return;function c(){q(W.current,{[A.Forwards]:()=>V(t,L.First),[A.Backwards]:()=>V(t,L.Last)})===pe.Error&&V(fe().filter(s=>s.dataset.headlessuiFocusGuard!=="true"),q(W.current,{[A.Forwards]:L.Next,[A.Backwards]:L.Previous}),{relativeTo:l.button})}c()}),u=te();return y.createElement(y.Fragment,null,u({ourProps:Q,theirProps:P,slot:N,defaultTag:ct,name:"Popover.Button"}),O&&!I&&x&&y.createElement(ie,{id:S,ref:l.afterButtonSentinel,features:ce.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:z}))}let dt="div",ft=re.RenderStrategy|re.Static;function _e(e,o){let i=r.useId(),{id:p=`headlessui-popover-backdrop-${i}`,transition:m=!1,...b}=e,[{popoverState:P},l]=oe("Popover.Backdrop"),[f,x]=r.useState(null),n=Y(o,x),S=ge(),[v,h]=he(m,f,S!==null?(S&Z.Open)===Z.Open:P===0),I=g(d=>{if(xe(d.currentTarget))return d.preventDefault();l({type:1})}),E=r.useMemo(()=>({open:P===0}),[P]),a={ref:n,id:p,"aria-hidden":!0,onClick:I,...Ie(h)};return te()({ourProps:a,theirProps:b,slot:E,defaultTag:dt,features:ft,visible:v,name:"Popover.Backdrop"})}let vt="div",mt=re.RenderStrategy|re.Static;function bt(e,o){let i=r.useId(),{id:p=`headlessui-popover-panel-${i}`,focus:m=!1,anchor:b,portal:P=!1,modal:l=!1,transition:f=!1,...x}=e,[n,S]=oe("Popover.Panel"),{close:v,isPortalled:h}=me("Popover.Panel"),I=`headlessui-focus-sentinel-before-${i}`,E=`headlessui-focus-sentinel-after-${i}`,a=r.useRef(null),d=Oe(b),[$,k]=Ne(d),w=De();d&&(P=!0);let[R,H]=r.useState(null),M=Y(a,o,d?$:null,g(t=>S({type:4,panel:t})),H),_=de(a);je(()=>(S({type:5,panelId:p}),()=>{S({type:5,panelId:null})}),[p,S]);let j=ge(),[T,U]=he(f,R,j!==null?(j&Z.Open)===Z.Open:n.popoverState===0);Ue(T,n.button,()=>{S({type:1})});let K=n.__demoMode?!1:l&&T;Je(K,_);let O=g(t=>{var c;switch(t.key){case G.Escape:if(n.popoverState!==0||!a.current||_!=null&&_.activeElement&&!a.current.contains(_.activeElement))return;t.preventDefault(),t.stopPropagation(),S({type:1}),(c=n.button)==null||c.focus();break}});r.useEffect(()=>{var t;e.static||n.popoverState===1&&((t=e.unmount)==null||t)&&S({type:4,panel:null})},[n.popoverState,e.unmount,e.static,S]),r.useEffect(()=>{if(n.__demoMode||!m||n.popoverState!==0||!a.current)return;let t=_==null?void 0:_.activeElement;a.current.contains(t)||V(a.current,L.First)},[n.__demoMode,m,a.current,n.popoverState]);let N=r.useMemo(()=>({open:n.popoverState===0,close:v}),[n.popoverState,v]),J=se(d?w():{},{ref:M,id:p,onKeyDown:O,onBlur:m&&n.popoverState===0?t=>{var c,s,B,F,C;let D=t.relatedTarget;D&&a.current&&((c=a.current)!=null&&c.contains(D)||(S({type:1}),((B=(s=n.beforePanelSentinel.current)==null?void 0:s.contains)!=null&&B.call(s,D)||(C=(F=n.afterPanelSentinel.current)==null?void 0:F.contains)!=null&&C.call(F,D))&&D.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:{...x.style,...k,"--button-width":Ae(n.button,!0).width},...Ie(U)}),Q=Ee(),W=g(()=>{let t=a.current;if(!t)return;function c(){q(Q.current,{[A.Forwards]:()=>{var s;V(t,L.First)===pe.Error&&((s=n.afterPanelSentinel.current)==null||s.focus())},[A.Backwards]:()=>{var s;(s=n.button)==null||s.focus({preventScroll:!0})}})}c()}),z=g(()=>{let t=a.current;if(!t)return;function c(){q(Q.current,{[A.Forwards]:()=>{if(!n.button)return;let s=fe(),B=s.indexOf(n.button),F=s.slice(0,B+1),C=[...s.slice(B+1),...F];for(let D of C.slice())if(D.dataset.headlessuiFocusGuard==="true"||R!=null&&R.contains(D)){let Pe=C.indexOf(D);Pe!==-1&&C.splice(Pe,1)}V(C,L.First,{sorted:!1})},[A.Backwards]:()=>{var s;V(t,L.Previous)===pe.Error&&((s=n.button)==null||s.focus())}})}c()}),u=te();return y.createElement(Ze,null,y.createElement(ae.Provider,{value:p},y.createElement(le.Provider,{value:{close:v,isPortalled:h}},y.createElement(Qe,{enabled:P?e.static||T:!1},T&&h&&y.createElement(ie,{id:I,ref:n.beforePanelSentinel,features:ce.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:W}),u({ourProps:J,theirProps:x,slot:N,defaultTag:vt,features:mt,visible:T,name:"Popover.Panel"}),T&&h&&y.createElement(ie,{id:E,ref:n.afterPanelSentinel,features:ce.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:z})))))}let Pt="div";function yt(e,o){let i=r.useRef(null),p=Y(i,o),[m,b]=r.useState([]),P=g(E=>{b(a=>{let d=a.indexOf(E);if(d!==-1){let $=a.slice();return $.splice(d,1),$}return a})}),l=g(E=>(b(a=>[...a,E]),()=>P(E))),f=g(()=>{var E;let a=tt(i);if(!a)return!1;let d=a.activeElement;return(E=i.current)!=null&&E.contains(d)?!0:m.some($=>{var k,w;return((k=a.getElementById($.buttonId.current))==null?void 0:k.contains(d))||((w=a.getElementById($.panelId.current))==null?void 0:w.contains(d))})}),x=g(E=>{for(let a of m)a.buttonId.current!==E&&a.close()}),n=r.useMemo(()=>({registerPopover:l,unregisterPopover:P,isFocusWithinPopoverGroup:f,closeOthers:x}),[l,P,f,x]),S=r.useMemo(()=>({}),[]),v=e,h={ref:p},I=te();return y.createElement($e,null,y.createElement(be.Provider,{value:n},I({ourProps:h,theirProps:v,slot:S,defaultTag:Pt,name:"Popover.Group"})))}let St=X(it),Be=X(pt),Et=X(_e),$t=X(_e),Te=X(bt),gt=X(yt),ht=Object.assign(St,{Button:Be,Backdrop:$t,Overlay:Et,Panel:Te,Group:gt});function Se({popoverContainerAs:e,popoverProps:o,popoverOpenerProps:i,popoverPanelProps:p,popperProps:m,children:b}){const P=p==null?void 0:p.anchor;return ee.jsx(ht,{as:e??"div",...o,className:ue(`${ne}-popover`,o==null?void 0:o.className),children:({open:l,close:f})=>ee.jsxs(ee.Fragment,{children:[ee.jsx(Be,{as:nt,...i,className:ue(`${ne}-popover__opener`,{[`${ne}-popover__opener--open`]:l},i==null?void 0:i.className)}),ee.jsx(Te,{transition:!0,...p,anchor:typeof P=="string"||typeof P=="boolean"?P:{to:"bottom start",gap:8,...P},className:ue("transition duration-150 ease-out data-[closed]:scale-95 data-[closed]:opacity-0",`${ne}-popover__panel`,p==null?void 0:p.className),children:typeof b=="function"?b(l,f):b})]})})}try{Se.displayName="Popover",Se.__docgenInfo={description:`TODO: improve this export

To close popover manually, add a PopoverButton from`,displayName:"Popover",props:{popoverContainerAs:{defaultValue:null,description:"",name:"popoverContainerAs",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},popoverProps:{defaultValue:null,description:"",name:"popoverProps",required:!1,type:{name:"any"}},popoverOpenerProps:{defaultValue:null,description:"",name:"popoverOpenerProps",required:!1,type:{name:'(Pick<object, never> & CleanProps<"button", "disabled" | "autoFocus" | ButtonPropsWeControl> & OurProps<"button", ButtonRenderPropArg> & { ...; } & { ...; })'}},popoverPanelProps:{defaultValue:null,description:"",name:"popoverPanelProps",required:!1,type:{name:"Partial<PopoverPanelProps>"}},popperProps:{defaultValue:null,description:"",name:"popperProps",required:!1,type:{name:"Partial<PopoverProps>"}}}}}catch{}export{gt as B,Se as P,ht as l};
