import{j as o}from"./jsx-runtime-Cw0GR0a5.js";import{c as de,u as me,F as he}from"./index.esm-Eo6g99vg.js";import{S as fe}from"./StorybookCommonWithForm-D_9e0g5Y.js";import{c as k,C as ge,a as _}from"./index-BPE7S6ci.js";import{n as pe}from"./index.browser-vcSNLBTf.js";import{r as i}from"./index-CTjT7uj6.js";import{_ as ve}from"./extends-CF3RwP-h.js";import{i as be,_ as ye}from"./use-isomorphic-layout-effect.browser.esm-BroWyoeo.js";import{d as Se}from"./debounce-D2cU03he.js";import{F as Ce}from"./CustomTransition-QYAwEdC6.js";import{I as Re}from"./Icon-Bd6wgpvP.js";import{B as Te}from"./Button-3zomcV1U.js";import"./animation-BOght_T9.js";import"./transition-BVEjyM41.js";import"./use-disposables-BgtiGxt7.js";import"./render-C-IlGZgy.js";import"./use-flags-B0uNXtCz.js";import"./use-is-mounted-DsBFbocb.js";import"./open-closed-CcTP-TJU.js";import"./index-C4AY7A6g.js";import"./index-BRV0Se7Z.js";var ze=function(e){var r=i.useRef(e);return be(function(){r.current=e}),r},I=function(e,r){if(typeof e=="function"){e(r);return}e.current=r},Fe=function(e,r){var a=i.useRef();return i.useCallback(function(l){e.current=l,a.current&&I(a.current,null),a.current=r,r&&I(r,l)},[r])},M={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},We=function(e){Object.keys(M).forEach(function(r){e.style.setProperty(r,M[r],"important")})},O=We,d=null,q=function(e,r){var a=e.scrollHeight;return r.sizingStyle.boxSizing==="border-box"?a+r.borderSize:a-r.paddingSize};function Le(t,e,r,a){r===void 0&&(r=1),a===void 0&&(a=1/0),d||(d=document.createElement("textarea"),d.setAttribute("tabindex","-1"),d.setAttribute("aria-hidden","true"),O(d)),d.parentNode===null&&document.body.appendChild(d);var l=t.paddingSize,u=t.borderSize,s=t.sizingStyle,R=s.boxSizing;Object.keys(s).forEach(function(b){var g=b;d.style[g]=s[g]}),O(d),d.value=e;var m=q(d,t);d.value=e,m=q(d,t),d.value="x";var v=d.scrollHeight-l,n=v*r;R==="border-box"&&(n=n+l+u),m=Math.max(n,m);var h=v*a;return R==="border-box"&&(h=h+l+u),m=Math.min(h,m),[m,v]}var B=function(){},je=function(e,r){return e.reduce(function(a,l){return a[l]=r[l],a},{})},Ee=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Ve=!!document.documentElement.currentStyle,xe=function(e){var r=window.getComputedStyle(e);if(r===null)return null;var a=je(Ee,r),l=a.boxSizing;if(l==="")return null;Ve&&l==="border-box"&&(a.width=parseFloat(a.width)+parseFloat(a.borderRightWidth)+parseFloat(a.borderLeftWidth)+parseFloat(a.paddingRight)+parseFloat(a.paddingLeft)+"px");var u=parseFloat(a.paddingBottom)+parseFloat(a.paddingTop),s=parseFloat(a.borderBottomWidth)+parseFloat(a.borderTopWidth);return{sizingStyle:a,paddingSize:u,borderSize:s}},we=xe;function ue(t,e,r){var a=ze(r);i.useLayoutEffect(function(){var l=function(s){return a.current(s)};if(t)return t.addEventListener(e,l),function(){return t.removeEventListener(e,l)}},[])}var Ne=function(e){ue(window,"resize",e)},He=function(e){ue(document.fonts,"loadingdone",e)},ke=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],_e=function(e,r){var a=e.cacheMeasurements,l=e.maxRows,u=e.minRows,s=e.onChange,R=s===void 0?B:s,m=e.onHeightChange,v=m===void 0?B:m,n=ye(e,ke),h=n.value!==void 0,b=i.useRef(null),g=Fe(b,r),y=i.useRef(0),T=i.useRef(),z=function(){var p=b.current,W=a&&T.current?T.current:we(p);if(W){T.current=W;var c=Le(W,p.value||p.placeholder||"x",u,l),C=c[0],ce=c[1];y.current!==C&&(y.current=C,p.style.setProperty("height",C+"px","important"),v(C,{rowHeight:ce}))}},S=function(p){h||z(),R(p)};return i.useLayoutEffect(z),Ne(z),He(z),i.createElement("textarea",ve({},n,{onChange:S,ref:g}))},Ie=i.forwardRef(_e);const Me=({control:t,name:e,onChange:r})=>{const a=de({name:e,control:t});return i.useEffect(()=>{r(a)},[a,r]),null},N=i.forwardRef(({borderType:t="outline",caption:e,captionIcon:r,state:a,label:l,hasContent:u,debounceParam:s,className:R,formControl:m,resize:v="both",...n},h)=>{const b=i.useRef((n==null?void 0:n.id)??`input---${pe()}`),g=a==="error",y=i.useRef(null);i.useEffect(()=>{h&&(typeof h=="function"?h(y.current):h.current=y.current)},[h]);const T=i.useRef(Se(c=>{var C;(C=n==null?void 0:n.onChange)==null||C.call(n,c)},(s==null?void 0:s.debounceTime)??0)),[z,S]=i.useState(u??!1),f=i.useCallback(()=>!!u||!!(n!=null&&n.value)||!!(n!=null&&n.defaultValue)||!!(n!=null&&n.placeholder),[n==null?void 0:n.value,n==null?void 0:n.placeholder,n==null?void 0:n.defaultValue,u]);i.useEffect(()=>{u!=null&&S(u)},[u]);const p=i.useCallback(c=>{S(!!c||f())},[f]),W=c=>{S(!!(n!=null&&n.placeholder)||f()||!!c.target.value),T.current(c)};return i.useEffect(()=>{S(f())},[f]),i.useLayoutEffect(()=>{setTimeout(()=>{var c;S(f()||!!((c=y.current)!=null&&c.value))},1)},[f]),i.useEffect(()=>{const c=T.current;return()=>{s&&(s.flushOnUnmount?c.flush():c.cancel())}},[s]),o.jsxs("div",{className:k(`${ge}-text-area`,R),children:[o.jsxs("div",{className:k("text-area-container",`text-area-container--${t}`,{"text-area-container--error":g},{"text-area-container--has-content":z},{"text-area-container--read-only":n==null?void 0:n.readOnly}),children:[o.jsx("label",{htmlFor:b.current,children:l}),o.jsx(Ie,{...n,id:b.current,ref:y,onChange:W,style:{resize:v}}),m&&o.jsx(Me,{control:m,name:n.name??"",onChange:p})]}),o.jsx(Ce,{show:!!e,children:o.jsxs("div",{className:k("caption-container",{"caption-container--error":g}),children:[(g||r)&&o.jsx(Re,{icon:r||["far","info-circle"],className:"fa-fw icon"}),e]})})]})});try{N.displayName="TextArea",N.__docgenInfo={description:"",displayName:"TextArea",props:{borderType:{defaultValue:{value:"outline"},description:"",name:"borderType",required:!1,type:{name:"enum",value:[{value:'"fill"'},{value:'"outline"'},{value:'"plain"'}]}},caption:{defaultValue:null,description:"",name:"caption",required:!1,type:{name:"ReactNode"}},captionIcon:{defaultValue:null,description:"",name:"captionIcon",required:!1,type:{name:'["fas" | "far" | "fal" | "fat" | "fad" | "fab", string]'}},state:{defaultValue:null,description:"",name:"state",required:!1,type:{name:"enum",value:[{value:'"normal"'},{value:'"error"'}]}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},hasContent:{defaultValue:null,description:"",name:"hasContent",required:!1,type:{name:"boolean"}},debounceParam:{defaultValue:null,description:"",name:"debounceParam",required:!1,type:{name:"{ debounceTime: number; flushOnUnmount?: boolean; }"}},formControl:{defaultValue:null,description:"",name:"formControl",required:!1,type:{name:"Control<any>"}},resize:{defaultValue:{value:"both"},description:"",name:"resize",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"inline"'},{value:'"both"'},{value:'"horizontal"'},{value:'"vertical"'},{value:'"inherit"'},{value:'"initial"'},{value:'"block"'},{value:'"-moz-initial"'},{value:'"revert"'},{value:'"revert-layer"'},{value:'"unset"'}]}}}}}catch{}const ln={title:"Components/Form/Text Area",component:N,argTypes:{label:{type:"string"},caption:{type:"string"},debounceParam:_,formControl:_},parameters:{controls:{expanded:!0}}},F=({...t})=>o.jsx(N,{...t}),L=F.bind({}),j=F.bind({});j.args={label:"Hello Label!"};const E=F.bind({});E.args={placeholder:"John Doe"};const V=F.bind({});V.args={minRows:5};const x=F.bind({});x.args={label:"What a label",placeholder:"John Doe"};const w=F.bind({});w.args={label:"What a label",placeholder:"John Doe",caption:o.jsx("div",{className:"input-stories-caption",children:"Here is a caption"})};L.args={};const H=t=>{const e=me(),{register:r,setValue:a,control:l}=e,u=()=>{a("formValue",Math.random().toString())};return o.jsx(he,{...e,children:o.jsxs(fe,{children:[o.jsxs("p",{className:"mb-4",children:[o.jsx("code",{children:"useForm's"})," ",o.jsx("code",{children:"setValue"})," demo"]}),o.jsx(N,{...t,...r("formValue"),label:"My Label",formControl:l}),o.jsx(Te,{borderType:"outline",className:"mt-4",onClick:u,children:"Generate random value"}),o.jsxs("p",{className:"mt-8",children:["You ",o.jsx("strong",{children:"MUST"})," pass the ",o.jsx("code",{children:"control"})," value from",o.jsx("code",{children:"useForm"})," to make the label float correctly",o.jsx("br",{}),"---",o.jsx("br",{}),"OR you can pass the `hasContent` prop to control the label float yourself"]})]})})};var U,$,D;L.parameters={...L.parameters,docs:{...(U=L.parameters)==null?void 0:U.docs,source:{originalSource:`({
  ...args
}) => <TextArea {...args} />`,...(D=($=L.parameters)==null?void 0:$.docs)==null?void 0:D.source}}};var Y,G,J;j.parameters={...j.parameters,docs:{...(Y=j.parameters)==null?void 0:Y.docs,source:{originalSource:`({
  ...args
}) => <TextArea {...args} />`,...(J=(G=j.parameters)==null?void 0:G.docs)==null?void 0:J.source}}};var X,Z,K;E.parameters={...E.parameters,docs:{...(X=E.parameters)==null?void 0:X.docs,source:{originalSource:`({
  ...args
}) => <TextArea {...args} />`,...(K=(Z=E.parameters)==null?void 0:Z.docs)==null?void 0:K.source}}};var Q,A,P;V.parameters={...V.parameters,docs:{...(Q=V.parameters)==null?void 0:Q.docs,source:{originalSource:`({
  ...args
}) => <TextArea {...args} />`,...(P=(A=V.parameters)==null?void 0:A.docs)==null?void 0:P.source}}};var ee,ne,re;x.parameters={...x.parameters,docs:{...(ee=x.parameters)==null?void 0:ee.docs,source:{originalSource:`({
  ...args
}) => <TextArea {...args} />`,...(re=(ne=x.parameters)==null?void 0:ne.docs)==null?void 0:re.source}}};var ae,te,oe;w.parameters={...w.parameters,docs:{...(ae=w.parameters)==null?void 0:ae.docs,source:{originalSource:`({
  ...args
}) => <TextArea {...args} />`,...(oe=(te=w.parameters)==null?void 0:te.docs)==null?void 0:oe.source}}};var ie,le,se;H.parameters={...H.parameters,docs:{...(ie=H.parameters)==null?void 0:ie.docs,source:{originalSource:`args => {
  const methods = useForm<{
    formValue: string;
  }>();
  const {
    register,
    setValue,
    control
  } = methods;
  const generateRandomValue = () => {
    setValue("formValue", Math.random().toString());
  };
  return <FormProvider {...methods}>\r
      <StorybookCommonWithForm>\r
        <p className="mb-4">\r
          <code>useForm's</code> <code>setValue</code> demo\r
        </p>\r
\r
        <TextArea {...args} {...register("formValue")} label="My Label" formControl={control} />\r
\r
        <Button borderType="outline" className="mt-4" onClick={generateRandomValue}>\r
          Generate random value\r
        </Button>\r
\r
        <p className="mt-8">\r
          You <strong>MUST</strong> pass the <code>control</code> value from\r
          <code>useForm</code> to make the label float correctly\r
          <br />\r
          ---\r
          <br />\r
          OR you can pass the \`hasContent\` prop to control the label float\r
          yourself\r
        </p>\r
      </StorybookCommonWithForm>\r
    </FormProvider>;
}`,...(se=(le=H.parameters)==null?void 0:le.docs)==null?void 0:se.source}}};const sn=["Default","WithLabel","WithPlaceholder","WithMinRows","WithLabelAndPlaceholder","WithCaption","WithUseFormSetValue"];export{L as Default,w as WithCaption,j as WithLabel,x as WithLabelAndPlaceholder,V as WithMinRows,E as WithPlaceholder,H as WithUseFormSetValue,sn as __namedExportsOrder,ln as default};
