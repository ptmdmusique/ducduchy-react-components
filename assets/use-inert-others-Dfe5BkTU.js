import{n as b,o as g}from"./use-sync-refs-CZ2KMCOF.js";import{u as w}from"./keyboard-tlvg-gRs.js";import{x as A}from"./portal-BDPEH6C3.js";let a=new Map,o=new Map;function p(e){var n;let t=(n=o.get(e))!=null?n:0;return o.set(e,t+1),t!==0?()=>c(e):(a.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>c(e))}function c(e){var n;let t=(n=o.get(e))!=null?n:1;if(t===1?o.delete(e):o.set(e,t-1),t!==1)return;let r=a.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,a.delete(e))}function M(e,{allowed:n,disallowed:t}={}){let r=A(e,"inert-others");b(()=>{var u,f;if(!r)return;let d=g();for(let i of(u=t==null?void 0:t())!=null?u:[])i&&d.add(p(i));let s=(f=n==null?void 0:n())!=null?f:[];for(let i of s){if(!i)continue;let m=w(i);if(!m)continue;let l=i.parentElement;for(;l&&l!==m.body;){for(let h of l.children)s.some(v=>h.contains(v))||d.add(p(h));l=l.parentElement}}return d.dispose},[r,n,t])}export{M as y};
