import{r as n,R as f}from"./index-BCtMShv3.js";import{K as Q,y as te,n as O,a as C,L as ne,O as he,s as me,p as ye,A as x,u as re,m as be,t as ge}from"./use-sync-refs-CZ2KMCOF.js";import{f as Te}from"./use-is-mounted-suvdIMg-.js";import{l as ie,u as le,i as P,x as Ce,R as $e,c as we}from"./use-server-handoff-complete-C8_JXbTh.js";function ae(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:se)!==n.Fragment||f.Children.count(e.children)===1}let D=n.createContext(null);D.displayName="TransitionContext";var Ee=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Ee||{});function Re(){let e=n.useContext(D);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function xe(){let e=n.useContext(U);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let U=n.createContext(null);U.displayName="NestingContext";function j(e){return"children"in e?j(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function oe(e,t){let r=me(e),s=n.useRef([]),$=Te(),F=ye(),v=C((a,i=x.Hidden)=>{let o=s.current.findIndex(({el:l})=>l===a);o!==-1&&(re(i,{[x.Unmount](){s.current.splice(o,1)},[x.Hidden](){s.current[o].state="hidden"}}),F.microTask(()=>{var l;!j(s)&&$.current&&((l=r.current)==null||l.call(r))}))}),w=C(a=>{let i=s.current.find(({el:o})=>o===a);return i?i.state!=="visible"&&(i.state="visible"):s.current.push({el:a,state:"visible"}),()=>v(a,x.Unmount)}),m=n.useRef([]),d=n.useRef(Promise.resolve()),p=n.useRef({enter:[],leave:[]}),y=C((a,i,o)=>{m.current.splice(0),t&&(t.chains.current[i]=t.chains.current[i].filter(([l])=>l!==a)),t==null||t.chains.current[i].push([a,new Promise(l=>{m.current.push(l)})]),t==null||t.chains.current[i].push([a,new Promise(l=>{Promise.all(p.current[i].map(([E,S])=>S)).then(()=>l())})]),i==="enter"?d.current=d.current.then(()=>t==null?void 0:t.wait.current).then(()=>o(i)):o(i)}),b=C((a,i,o)=>{Promise.all(p.current[i].splice(0).map(([l,E])=>E)).then(()=>{var l;(l=m.current.shift())==null||l()}).then(()=>o(i))});return n.useMemo(()=>({children:s,register:w,unregister:v,onStart:y,onStop:b,wait:d,chains:p}),[w,v,s,y,b,p,d])}let se=n.Fragment,ue=he.RenderStrategy;function Fe(e,t){var r,s;let{transition:$=!0,beforeEnter:F,afterEnter:v,beforeLeave:w,afterLeave:m,enter:d,enterFrom:p,enterTo:y,entered:b,leave:a,leaveFrom:i,leaveTo:o,...l}=e,[E,S]=n.useState(null),u=n.useRef(null),g=ae(e),R=te(...g?[u,t,S]:t===null?[]:[t]),W=(r=l.unmount)==null||r?x.Unmount:x.Hidden,{show:h,appear:X,initial:Y}=Re(),[T,z]=n.useState(h?"visible":"hidden"),Z=xe(),{register:L,unregister:M}=Z;O(()=>L(u),[L,u]),O(()=>{if(W===x.Hidden&&u.current){if(h&&T!=="visible"){z("visible");return}return re(T,{hidden:()=>M(u),visible:()=>L(u)})}},[T,u,L,M,h,W]);let K=ie();O(()=>{if(g&&K&&T==="visible"&&u.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[u,T,K,g]);let de=Y&&!X,q=X&&h&&Y,V=n.useRef(!1),N=oe(()=>{V.current||(z("hidden"),M(u))},Z),J=C(k=>{V.current=!0;let I=k?"enter":"leave";N.onStart(u,I,H=>{H==="enter"?F==null||F():H==="leave"&&(w==null||w())})}),_=C(k=>{let I=k?"enter":"leave";V.current=!1,N.onStop(u,I,H=>{H==="enter"?v==null||v():H==="leave"&&(m==null||m())}),I==="leave"&&!j(N)&&(z("hidden"),M(u))});n.useEffect(()=>{g&&$||(J(h),_(h))},[h,g,$]);let fe=!(!$||!g||!K||de),[,c]=Ce(fe,E,h,{start:J,end:_}),ve=be({ref:R,className:((s=ge(l.className,q&&d,q&&p,c.enter&&d,c.enter&&c.closed&&p,c.enter&&!c.closed&&y,c.leave&&a,c.leave&&!c.closed&&i,c.leave&&c.closed&&o,!c.transition&&h&&b))==null?void 0:s.trim())||void 0,...$e(c)}),A=0;T==="visible"&&(A|=P.Open),T==="hidden"&&(A|=P.Closed),c.enter&&(A|=P.Opening),c.leave&&(A|=P.Closing);let pe=ne();return f.createElement(U.Provider,{value:N},f.createElement(we,{value:A},pe({ourProps:ve,theirProps:l,defaultTag:se,features:ue,visible:T==="visible",name:"Transition.Child"})))}function Pe(e,t){let{show:r,appear:s=!1,unmount:$=!0,...F}=e,v=n.useRef(null),w=ae(e),m=te(...w?[v,t]:t===null?[]:[t]);ie();let d=le();if(r===void 0&&d!==null&&(r=(d&P.Open)===P.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[p,y]=n.useState(r?"visible":"hidden"),b=oe(()=>{r||y("hidden")}),[a,i]=n.useState(!0),o=n.useRef([r]);O(()=>{a!==!1&&o.current[o.current.length-1]!==r&&(o.current.push(r),i(!1))},[o,r]);let l=n.useMemo(()=>({show:r,appear:s,initial:a}),[r,s,a]);O(()=>{r?y("visible"):!j(b)&&v.current!==null&&y("hidden")},[r,b]);let E={unmount:$},S=C(()=>{var R;a&&i(!1),(R=e.beforeEnter)==null||R.call(e)}),u=C(()=>{var R;a&&i(!1),(R=e.beforeLeave)==null||R.call(e)}),g=ne();return f.createElement(U.Provider,{value:b},f.createElement(D.Provider,{value:l},g({ourProps:{...E,as:n.Fragment,children:f.createElement(ce,{ref:m,...E,...F,beforeEnter:S,beforeLeave:u})},theirProps:{},defaultTag:n.Fragment,features:ue,visible:p==="visible",name:"Transition"})))}function Se(e,t){let r=n.useContext(D)!==null,s=le()!==null;return f.createElement(f.Fragment,null,!r&&s?f.createElement(G,{ref:t,...e}):f.createElement(ce,{ref:t,...e}))}let G=Q(Pe),ce=Q(Fe),Ae=Q(Se),Ne=Object.assign(G,{Child:Ae,Root:G});const Ie={fadeInOut:{enter:"transition-opacity duration-75",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0"},fadeAndSlide:{enter:"transition duration-75 transform",enterFrom:"opacity-0 translate-y-full",enterTo:"opacity-100 translate-y-0",leave:"transition duration-150 transform",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-full"}},De={overlay:{hidden:{opacity:0},visible:{opacity:1}},modal:{hidden:{y:"-100px",opacity:0},visible:{y:0,opacity:1}}},B=e=>typeof e=="number"?`${e}px`:e,ee=(e,t)=>`circle(${B(t)} at ${B(e.x)} ${B(e.y)})`,Ue=({center:e={x:"50vw",y:"50vh"},finalSize:t="100%",initialSize:r="0%"})=>({hidden:{clipPath:ee(e,r),opacity:.5,transition:{duration:.3}},visible:{clipPath:ee(e,t),opacity:1,transition:{duration:.3}}});export{Ae as F,Ue as g,Ie as h,De as m,Ne as z};
