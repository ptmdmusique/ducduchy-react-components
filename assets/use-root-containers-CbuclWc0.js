import{r as n,R as m}from"./index-CTjT7uj6.js";import{c as M,a as d,d as $,U as C,y as g,T as w,s as y,b as S,l as E,C as R}from"./render-C-IlGZgy.js";import{s as F,n as h}from"./use-owner-DSOmOYVQ.js";import{r as H}from"./index-9r8iugjR.js";import{u as T,s as x}from"./hidden-BS2yFtF9.js";function Q(e,t,l,r){let s=M(l);n.useEffect(()=>{e=e??window;function a(u){s.current(u)}return e.addEventListener(t,a,r),()=>e.removeEventListener(t,a,r)},[e,t,r])}function L(e){let t=d(e),l=n.useRef(!1);n.useEffect(()=>(l.current=!1,()=>{l.current=!0,$(()=>{l.current&&t()})}),[t])}var k=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(k||{});function V(){let e=n.useRef(0);return F("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}let b=n.createContext(!1);function A(){return n.useContext(b)}function W(e){return m.createElement(b.Provider,{value:e.force},e.children)}function B(e){let t=A(),l=n.useContext(N),r=h(e),[s,a]=n.useState(()=>{if(!t&&l!==null||y.isServer)return null;let u=r==null?void 0:r.getElementById("headlessui-portal-root");if(u)return u;if(r===null)return null;let o=r.createElement("div");return o.setAttribute("id","headlessui-portal-root"),r.body.appendChild(o)});return n.useEffect(()=>{s!==null&&(r!=null&&r.body.contains(s)||r==null||r.body.appendChild(s))},[s,r]),n.useEffect(()=>{t||l!==null&&a(l.current)},[l,a,t]),s}let U=n.Fragment;function j(e,t){let l=e,r=n.useRef(null),s=g(w(c=>{r.current=c}),t),a=h(r),u=B(r),[o]=n.useState(()=>{var c;return y.isServer?null:(c=a==null?void 0:a.createElement("div"))!=null?c:null}),f=n.useContext(v),p=S();return E(()=>{!u||!o||u.contains(o)||(o.setAttribute("data-headlessui-portal",""),u.appendChild(o))},[u,o]),E(()=>{if(o&&f)return f.register(o)},[f,o]),L(()=>{var c;!u||!o||(o instanceof Node&&u.contains(o)&&u.removeChild(o),u.childNodes.length<=0&&((c=u.parentElement)==null||c.removeChild(u)))}),p?!u||!o?null:H.createPortal(R({ourProps:{ref:s},theirProps:l,defaultTag:U,name:"Portal"}),o):null}let D=n.Fragment,N=n.createContext(null);function G(e,t){let{target:l,...r}=e,s={ref:g(t)};return m.createElement(N.Provider,{value:l},R({ourProps:s,theirProps:r,defaultTag:D,name:"Popover.Group"}))}let v=n.createContext(null);function X(){let e=n.useContext(v),t=n.useRef([]),l=d(a=>(t.current.push(a),e&&e.register(a),()=>r(a))),r=d(a=>{let u=t.current.indexOf(a);u!==-1&&t.current.splice(u,1),e&&e.unregister(a)}),s=n.useMemo(()=>({register:l,unregister:r,portals:t}),[l,r,t]);return[t,n.useMemo(()=>function({children:a}){return m.createElement(v.Provider,{value:s},a)},[s])]}let I=C(j),O=C(G),Y=Object.assign(I,{Group:O});function Z({defaultContainers:e=[],portals:t,mainTreeNodeRef:l}={}){var r;let s=n.useRef((r=l==null?void 0:l.current)!=null?r:null),a=h(s),u=d(()=>{var o,f,p;let c=[];for(let i of e)i!==null&&(i instanceof HTMLElement?c.push(i):"current"in i&&i.current instanceof HTMLElement&&c.push(i.current));if(t!=null&&t.current)for(let i of t.current)c.push(i);for(let i of(o=a==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?o:[])i!==document.body&&i!==document.head&&i instanceof HTMLElement&&i.id!=="headlessui-portal-root"&&(i.contains(s.current)||i.contains((p=(f=s.current)==null?void 0:f.getRootNode())==null?void 0:p.host)||c.some(P=>i.contains(P))||c.push(i));return c});return{resolveContainers:u,contains:d(o=>u().some(f=>f.contains(o))),mainTreeNodeRef:s,MainTreeNode:n.useMemo(()=>function(){return l!=null?null:m.createElement(T,{features:x.Hidden,ref:s})},[s,l])}}function ee(){let e=n.useRef(null);return{mainTreeNodeRef:e,MainTreeNode:n.useMemo(()=>function(){return m.createElement(T,{features:x.Hidden,ref:e})},[e])}}export{Q as E,Z as N,L as c,X as e,W as l,V as n,k as s,Y as t,ee as y};
