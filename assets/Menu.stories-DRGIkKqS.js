import{j as D}from"./jsx-runtime-Cw0GR0a5.js";import{r as d,R as K}from"./index-CTjT7uj6.js";import{c as P,C as R,a as C}from"./index-BPE7S6ci.js";import{p as ee}from"./use-disposables-BgtiGxt7.js";import{a as h,O as H,U as w,y as k,u as te,C as A,l as O,o as V}from"./render-C-IlGZgy.js";import{I as U,o as f}from"./keyboard-BCuVGIMY.js";import{y as ne,n as ae}from"./use-owner-DSOmOYVQ.js";import{T as ie}from"./use-resolve-button-type-CoZBuHh8.js";import{F as oe}from"./use-tree-walker-DAqOuh4M.js";import{s as le,d as $,u as ue}from"./open-closed-CcTP-TJU.js";import{r as se}from"./bugs-DpEN4NTH.js";import{h as me,T as ce,_ as de,M as X,D as re,I as pe}from"./focus-management-CaV_VYtM.js";import{B as fe}from"./Button-WKpNADTN.js";import"./Icon-Bd6wgpvP.js";import"./index-C4AY7A6g.js";import"./index-BRV0Se7Z.js";function G(e){return[e.screenX,e.screenY]}function ve(){let e=d.useRef([-1,-1]);return{wasMoved(a){let r=G(a);return e.current[0]===r[0]&&e.current[1]===r[1]?!1:(e.current=r,!0)},update(a){e.current=G(a)}}}function ye(e){throw new Error("Unexpected object: "+e)}var S=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(S||{});function Ie(e,a){let r=a.resolveItems();if(r.length<=0)return null;let n=a.resolveActiveIndex(),o=n??-1;switch(e.focus){case 0:{for(let t=0;t<r.length;++t)if(!a.resolveDisabled(r[t],t,r))return t;return n}case 1:{for(let t=o-1;t>=0;--t)if(!a.resolveDisabled(r[t],t,r))return t;return n}case 2:{for(let t=o+1;t<r.length;++t)if(!a.resolveDisabled(r[t],t,r))return t;return n}case 3:{for(let t=r.length-1;t>=0;--t)if(!a.resolveDisabled(r[t],t,r))return t;return n}case 4:{for(let t=0;t<r.length;++t)if(a.resolveId(r[t],t,r)===e.id)return t;return n}case 5:return null;default:ye(e)}}let J=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function W(e){var a,r;let n=(a=e.innerText)!=null?a:"",o=e.cloneNode(!0);if(!(o instanceof HTMLElement))return n;let t=!1;for(let i of o.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))i.remove(),t=!0;let l=t?(r=o.innerText)!=null?r:"":n;return J.test(l)&&(l=l.replace(J,"")),l}function be(e){let a=e.getAttribute("aria-label");if(typeof a=="string")return a.trim();let r=e.getAttribute("aria-labelledby");if(r){let n=r.split(" ").map(o=>{let t=document.getElementById(o);if(t){let l=t.getAttribute("aria-label");return typeof l=="string"?l.trim():W(t).trim()}return null}).filter(Boolean);if(n.length>0)return n.join(", ")}return W(e).trim()}function he(e){let a=d.useRef(""),r=d.useRef("");return h(()=>{let n=e.current;if(!n)return"";let o=n.innerText;if(a.current===o)return r.current;let t=be(n).trim().toLowerCase();return a.current=o,r.current=t,t})}var ge=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ge||{}),xe=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(xe||{}),Re=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(Re||{});function q(e,a=r=>r){let r=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,n=pe(a(e.items.slice()),t=>t.dataRef.current.domRef.current),o=r?n.indexOf(r):null;return o===-1&&(o=null),{items:n,activeItemIndex:o}}let De={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,a)=>{var r;let n=q(e),o=Ie(a,{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:t=>t.id,resolveDisabled:t=>t.dataRef.current.disabled});return{...e,...n,searchQuery:"",activeItemIndex:o,activationTrigger:(r=a.trigger)!=null?r:1}},3:(e,a)=>{let r=e.searchQuery!==""?0:1,n=e.searchQuery+a.value.toLowerCase(),o=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+r).concat(e.items.slice(0,e.activeItemIndex+r)):e.items).find(l=>{var i;return((i=l.dataRef.current.textValue)==null?void 0:i.startsWith(n))&&!l.dataRef.current.disabled}),t=o?e.items.indexOf(o):-1;return t===-1||t===e.activeItemIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeItemIndex:t,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,a)=>{let r=q(e,n=>[...n,{id:a.id,dataRef:a.dataRef}]);return{...e,...r}},6:(e,a)=>{let r=q(e,n=>{let o=n.findIndex(t=>t.id===a.id);return o!==-1&&n.splice(o,1),n});return{...e,...r,activationTrigger:1}}},B=d.createContext(null);B.displayName="MenuContext";function j(e){let a=d.useContext(B);if(a===null){let r=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,j),r}return a}function Se(e,a){return te(a.type,De,e,a)}let Ce=d.Fragment;function Me(e,a){let{__demoMode:r=!1,...n}=e,o=d.useReducer(Se,{__demoMode:r,menuState:r?0:1,buttonRef:d.createRef(),itemsRef:d.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:t,itemsRef:l,buttonRef:i},s]=o,p=k(a);ne([i,l],(I,b)=>{var m;s({type:1}),me(b,ce.Loose)||(I.preventDefault(),(m=i.current)==null||m.focus())},t===0);let y=h(()=>{s({type:1})}),g=d.useMemo(()=>({open:t===0,close:y}),[t,y]),c={ref:p};return K.createElement(B.Provider,{value:o},K.createElement(le,{value:te(t,{0:$.Open,1:$.Closed})},A({ourProps:c,theirProps:n,slot:g,defaultTag:Ce,name:"Menu"})))}let _e="button";function Ee(e,a){var r;let n=U(),{id:o=`headlessui-menu-button-${n}`,...t}=e,[l,i]=j("Menu.Button"),s=k(l.buttonRef,a),p=ee(),y=h(m=>{switch(m.key){case f.Space:case f.Enter:case f.ArrowDown:m.preventDefault(),m.stopPropagation(),i({type:0}),p.nextFrame(()=>i({type:2,focus:S.First}));break;case f.ArrowUp:m.preventDefault(),m.stopPropagation(),i({type:0}),p.nextFrame(()=>i({type:2,focus:S.Last}));break}}),g=h(m=>{switch(m.key){case f.Space:m.preventDefault();break}}),c=h(m=>{if(se(m.currentTarget))return m.preventDefault();e.disabled||(l.menuState===0?(i({type:1}),p.nextFrame(()=>{var x;return(x=l.buttonRef.current)==null?void 0:x.focus({preventScroll:!0})})):(m.preventDefault(),i({type:0})))}),I=d.useMemo(()=>({open:l.menuState===0}),[l]),b={ref:s,id:o,type:ie(e,l.buttonRef),"aria-haspopup":"menu","aria-controls":(r=l.itemsRef.current)==null?void 0:r.id,"aria-expanded":l.menuState===0,onKeyDown:y,onKeyUp:g,onClick:c};return A({ourProps:b,theirProps:t,slot:I,defaultTag:_e,name:"Menu.Button"})}let Te="div",Pe=H.RenderStrategy|H.Static;function Fe(e,a){var r,n;let o=U(),{id:t=`headlessui-menu-items-${o}`,...l}=e,[i,s]=j("Menu.Items"),p=k(i.itemsRef,a),y=ae(i.itemsRef),g=ee(),c=ue(),I=c!==null?(c&$.Open)===$.Open:i.menuState===0;d.useEffect(()=>{let u=i.itemsRef.current;u&&i.menuState===0&&u!==(y==null?void 0:y.activeElement)&&u.focus({preventScroll:!0})},[i.menuState,i.itemsRef,y]),oe({container:i.itemsRef.current,enabled:i.menuState===0,accept(u){return u.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:u.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(u){u.setAttribute("role","none")}});let b=h(u=>{var M,T;switch(g.dispose(),u.key){case f.Space:if(i.searchQuery!=="")return u.preventDefault(),u.stopPropagation(),s({type:3,value:u.key});case f.Enter:if(u.preventDefault(),u.stopPropagation(),s({type:1}),i.activeItemIndex!==null){let{dataRef:v}=i.items[i.activeItemIndex];(T=(M=v.current)==null?void 0:M.domRef.current)==null||T.click()}re(i.buttonRef.current);break;case f.ArrowDown:return u.preventDefault(),u.stopPropagation(),s({type:2,focus:S.Next});case f.ArrowUp:return u.preventDefault(),u.stopPropagation(),s({type:2,focus:S.Previous});case f.Home:case f.PageUp:return u.preventDefault(),u.stopPropagation(),s({type:2,focus:S.First});case f.End:case f.PageDown:return u.preventDefault(),u.stopPropagation(),s({type:2,focus:S.Last});case f.Escape:u.preventDefault(),u.stopPropagation(),s({type:1}),V().nextFrame(()=>{var v;return(v=i.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})});break;case f.Tab:u.preventDefault(),u.stopPropagation(),s({type:1}),V().nextFrame(()=>{de(i.buttonRef.current,u.shiftKey?X.Previous:X.Next)});break;default:u.key.length===1&&(s({type:3,value:u.key}),g.setTimeout(()=>s({type:4}),350));break}}),m=h(u=>{switch(u.key){case f.Space:u.preventDefault();break}}),x=d.useMemo(()=>({open:i.menuState===0}),[i]),E={"aria-activedescendant":i.activeItemIndex===null||(r=i.items[i.activeItemIndex])==null?void 0:r.id,"aria-labelledby":(n=i.buttonRef.current)==null?void 0:n.id,id:t,onKeyDown:b,onKeyUp:m,role:"menu",tabIndex:0,ref:p};return A({ourProps:E,theirProps:l,slot:x,defaultTag:Te,features:Pe,visible:I,name:"Menu.Items"})}let $e=d.Fragment;function Ne(e,a){let r=U(),{id:n=`headlessui-menu-item-${r}`,disabled:o=!1,...t}=e,[l,i]=j("Menu.Item"),s=l.activeItemIndex!==null?l.items[l.activeItemIndex].id===n:!1,p=d.useRef(null),y=k(a,p);O(()=>{if(l.__demoMode||l.menuState!==0||!s||l.activationTrigger===0)return;let v=V();return v.requestAnimationFrame(()=>{var L,Q;(Q=(L=p.current)==null?void 0:L.scrollIntoView)==null||Q.call(L,{block:"nearest"})}),v.dispose},[l.__demoMode,p,s,l.menuState,l.activationTrigger,l.activeItemIndex]);let g=he(p),c=d.useRef({disabled:o,domRef:p,get textValue(){return g()}});O(()=>{c.current.disabled=o},[c,o]),O(()=>(i({type:5,id:n,dataRef:c}),()=>i({type:6,id:n})),[c,n]);let I=h(()=>{i({type:1})}),b=h(v=>{if(o)return v.preventDefault();i({type:1}),re(l.buttonRef.current)}),m=h(()=>{if(o)return i({type:2,focus:S.Nothing});i({type:2,focus:S.Specific,id:n})}),x=ve(),E=h(v=>x.update(v)),u=h(v=>{x.wasMoved(v)&&(o||s||i({type:2,focus:S.Specific,id:n,trigger:0}))}),M=h(v=>{x.wasMoved(v)&&(o||s&&i({type:2,focus:S.Nothing}))}),T=d.useMemo(()=>({active:s,disabled:o,close:I}),[s,o,I]);return A({ourProps:{id:n,ref:y,role:"menuitem",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,disabled:void 0,onClick:b,onFocus:m,onPointerEnter:E,onMouseEnter:E,onPointerMove:u,onMouseMove:u,onPointerLeave:M,onMouseLeave:M},theirProps:t,slot:T,defaultTag:$e,name:"Menu.Item"})}let we=w(Me),ke=w(Ee),Ae=w(Fe),je=w(Ne),F=Object.assign(we,{Button:ke,Items:Ae,Item:je});function N({onItemChosen:e,menuContainerAs:a,menuProps:r,menuItemsProps:n,useDivider:o=!0,renderCustomMenuOpener:t,menuOpenerProps:l,itemContainerOnRightSide:i,menuItemList:s,renderWholeItem:p,renderItem:y,renderItemContent:g}){return D.jsx(F,{as:a??"div",...r,className:P(`${R}-menu`,r==null?void 0:r.className),children:({open:c})=>D.jsxs(D.Fragment,{children:[(t==null?void 0:t(c))??D.jsx(F.Button,{as:fe,...l,className:P(`${R}-menu__opener`,{[`${R}-menu__opener--open`]:c},l==null?void 0:l.className)}),D.jsx(F.Items,{as:"ul",...n,className:P(`${R}-menu__item-container`,{[`${R}-menu__item-container--right`]:i,[`${R}-menu__item-container--open`]:c,[`${R}-menu__item-container--use-divider`]:o},n==null?void 0:n.className),children:s.map((I,b)=>(p==null?void 0:p(I,b,c))??D.jsx(F.Item,{as:d.Fragment,children:({active:m,disabled:x})=>(y==null?void 0:y(I,b,{active:m,disabled:x,menuOpen:c}))??D.jsx("li",{className:P(`${R}-menu__item`,{[`${R}-menu__item--menu-open`]:c,[`${R}-menu__item--active`]:m,[`${R}-menu__item--disabled`]:x}),onClick:()=>{e==null||e(I,b)},children:g==null?void 0:g(I,b,{active:m,disabled:x,menuOpen:c})})},`menu-item---${b}`))})]})})}try{N.displayName="Menu",N.__docgenInfo={description:"Note, the menu dropdown is relative to the outer container",displayName:"Menu",props:{onItemChosen:{defaultValue:null,description:"",name:"onItemChosen",required:!1,type:{name:"((item: Item, index: number) => void)"}},menuContainerAs:{defaultValue:null,description:"",name:"menuContainerAs",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},itemContainerOnRightSide:{defaultValue:null,description:"",name:"itemContainerOnRightSide",required:!1,type:{name:"boolean"}},useDivider:{defaultValue:{value:"true"},description:"",name:"useDivider",required:!1,type:{name:"boolean"}},menuProps:{defaultValue:null,description:"",name:"menuProps",required:!1,type:{name:"any"}},menuItemsProps:{defaultValue:null,description:"",name:"menuItemsProps",required:!1,type:{name:"(MenuItemsProps<ElementType> & { ref?: Ref<HTMLDivElement>; })"}},menuOpenerProps:{defaultValue:null,description:"",name:"menuOpenerProps",required:!1,type:{name:'(Pick<object, never> & CleanProps<ElementType, "disabled" | ButtonPropsWeControl> & OurProps<ElementType, ButtonRenderPropArg> & { ...; } & { ...; } & { ...; })'}},renderCustomMenuOpener:{defaultValue:null,description:"",name:"renderCustomMenuOpener",required:!1,type:{name:"((menuOpen: boolean) => ReactNode)"}},menuItemList:{defaultValue:null,description:"",name:"menuItemList",required:!0,type:{name:"Item[] | readonly Item[]"}},renderWholeItem:{defaultValue:null,description:"Render whole item, including the container\n\nUse `renderItemContent` or `renderItem` to render just the content of the item\n and leave accessbility and styling of the container handled by the component",name:"renderWholeItem",required:!1,type:{name:"((item: Item, index: number, menuOpen: boolean) => ReactNode)"}},renderItem:{defaultValue:null,description:"Render just the inner of the item and let the lib handle accessiblity\n\nUnnecessary if `renderItem` is present",name:"renderItem",required:!1,type:{name:"((item: Item, index: number, props: { active: boolean; disabled: boolean; menuOpen: boolean; }) => ReactElement<any, string | JSXElementConstructor<any>>)"}},renderItemContent:{defaultValue:null,description:"Used to render each item, unnecessary if `renderItem` or `renderWholeItem` is present",name:"renderItemContent",required:!1,type:{name:"((item: Item, index: number, props: { active: boolean; disabled: boolean; menuOpen: boolean; }) => ReactNode)"}}}}}catch{}const Le=[{label:"ðŸ’ª My label",value:"my value"},{label:"âœŒ Hands",value:"my value 2"},{label:"ðŸ¶ Dog",value:"my value 3"},{label:"ðŸ± Cat",value:"my value 4"}],rt={title:"Components/Menu",component:N,argTypes:{renderCustomMenuOpener:C,menuContainerAs:C,menuProps:C,menuItemList:C,menuOpenerProps:C,renderWholeItem:C,renderItemContent:C,onItemChosen:C,itemContainerOnRightSide:{type:"boolean"}},parameters:{controls:{expanded:!0}}},Oe=e=>{const[a,r]=d.useState(null);return D.jsxs("div",{children:[D.jsx(N,{...e,menuProps:{className:"ml-64",style:{width:"fit-content"}},onItemChosen:r,menuOpenerProps:{children:"Click Me!"},renderItemContent:n=>D.jsx("div",{className:"w-full py-2 px-4 text-skin-base",children:n.label})}),D.jsxs("div",{className:"mt-8 text-skin-base",children:["Chosen item: ",a==null?void 0:a.label]})]})},_=Oe.bind({});_.args={menuItemList:Le};var Y,z,Z;_.parameters={..._.parameters,docs:{...(Y=_.parameters)==null?void 0:Y.docs,source:{originalSource:`args => {
  const [chosenItem, setChosenItem] = useState<ItemType | null>(null);
  return <div>\r
      <Menu {...args} menuProps={{
      className: "ml-64",
      style: {
        width: "fit-content"
      }
    }} onItemChosen={setChosenItem} menuOpenerProps={{
      children: "Click Me!"
    }} renderItemContent={item => <div className="w-full py-2 px-4 text-skin-base">{item.label}</div>} />\r
\r
      <div className="mt-8 text-skin-base">\r
        Chosen item: {chosenItem?.label}\r
      </div>\r
    </div>;
}`,...(Z=(z=_.parameters)==null?void 0:z.docs)==null?void 0:Z.source}}};const nt=["Default"];export{_ as Default,nt as __namedExportsOrder,rt as default};
